<ion-content [fullscreen]="true">
  <div class="membership-wrapper">

    <!-- ================================
         SIDEBAR MENU (LEFT NAVIGATION)
    ================================== -->
    <div class="sidebar">
      <div class="sidebar-title">Menu</div>

      <!-- Home navigation -->
      <button class="sidebar-btn" (click)="goToUserMembership()">
        <ion-icon name="body"></ion-icon> Home
      </button>

      <!-- Booking navigation -->
      <button class="sidebar-btn" (click)="goToBook()">
        <ion-icon name="clipboard-outline"></ion-icon> Book
      </button>

      <!-- WOD navigation -->
      <button class="sidebar-btn" (click)="goToWod()">
        <ion-icon name="barbell-outline"></ion-icon> WOD
      </button>

      <!-- Cancellation navigation -->
      <button class="sidebar-btn" (click)="goToCancel()">
        <ion-icon name="close" color="danger"></ion-icon> Cancel
      </button>

      <!-- Class history navigation -->
      <button class="sidebar-btn" (click)="goToHistory()">
        <ion-icon name="calendar-number"></ion-icon> History
      </button>
    </div>
    <!-- /sidebar -->

    <!-- ================================
         MAIN PANEL (CONTENT AREA)
    ================================== -->
    <div class="main-panel">

      <!-- Top bar with title and logout -->
      <div class="top-bar">
        <h1 class="welcome-text">Workout of the Day</h1>
        <button class="logout-button" (click)="logout()">
          <ion-icon name="log-out-outline" color="danger"></ion-icon> Logout
        </button>
      </div>
      <!-- /top-bar -->

      <!-- Layout containing calendar (left) and WOD info (right) -->
      <div class="calendar-wod-layout">

        <!-- ==========================
             LEFT COLUMN: CALENDAR
        =========================== -->
        <div class="datetime-container">
          <ion-datetime
            presentation="date"
            [value]="selectedDate"
            (ionChange)="onDateSelected($event)">
          </ion-datetime>
        </div>
        <!-- /datetime-container -->

        <!-- ==========================
             RIGHT COLUMN: WOD CONTENT
        =========================== -->
        <div class="wod-section">

          <!-- Display WOD if available -->
          <ion-card class="wod-card" *ngIf="selectedDate && wodDescription">
            <ion-card-header>
              <ion-card-title>{{ wodTitle }}</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <div [innerHTML]="wodDescription"></div>
            </ion-card-content>
          </ion-card>

          <!-- Message if no WOD found -->
          <div *ngIf="selectedDate && !wodDescription" class="no-wod">
            <p>No WOD available for the selected date.</p>
          </div>

          <!-- Admin/Coach Editor for WOD -->
          <ion-card class="wod-edit-card" *ngIf="selectedDate && isAdminOrCoach()">
            <ion-card-header>
              <ion-card-title>WOD Description</ion-card-title>
            </ion-card-header>
            <ion-card-content>

              <!-- Textarea to edit WOD -->
              <ion-textarea
                name="wodNotes"
                [(ngModel)]="wodNotes"
                placeholder="Type the WOD description here...">
              </ion-textarea>

              <!-- Action buttons -->
              <div class="button-group">
                <ion-button
                  color="danger"
                  expand="block"
                  (click)="deleteWod()"
                  [disabled]="!wodDescription">
                  Delete
                </ion-button>

                <ion-button
                  color="primary"
                  (click)="editWod()"
                  *ngIf="wodDescription && isAdminOrCoach()">
                  Edit
                </ion-button>

                <ion-button
                  color="success"
                  expand="block"
                  (click)="saveWodNotes()"
                  [disabled]="!wodNotes || !wodNotes.trim()">
                  Save
                </ion-button>
              </div>
              <!-- /button-group -->

            </ion-card-content>
          </ion-card>

        </div> <!-- /wod-section -->

      </div> <!-- /calendar-wod-layout -->

      <!-- ==========================
           MOTIVATIONAL QUOTE
      =========================== -->
      <div class="motivational-card">
        <ion-card>
          <ion-card-content>
            <div class="motivational-text">
              {{ motivationalPhrases[currentPhraseIndex] }}
            </div>
          </ion-card-content>
        </ion-card>
      </div>
      <!-- /motivational-card -->

    </div>
    <!-- /main-panel -->

  </div>
  <!-- /membership-wrapper -->
</ion-content>
